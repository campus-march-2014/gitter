<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap 101 Template</title>

    <!-- Bootstrap -->
    <link href="css/bootstrap.css" rel="stylesheet">


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
<body>
<h1 class="text-center">Admin panel</h1>

<div class="container-fluid" id="taidinteble-container">
    <table class="table table-bordered" id="repositories">
        <thead>
        <tr>
            <th class="text-center">Repository name</th>
            <th class="text-center">Events</th>
        </tr>
        </thead>
        <tbody>
        <!--<tr>-->
            <!--<td>jfjdhfighfutofnhdgdugorfnschfikrfjdbcdu</td>-->
            <!--<td>-->
                <!--<label class="checkbox-inline">-->
                    <!--<input type="checkbox" id="chbCommit1" value="option1"> COMMIT-->
                <!--</label>-->
                <!--<label class="checkbox-inline">-->
                    <!--<input type="checkbox" id="chbIssues1" value="option2"> ISSUES-->
                <!--</label>-->
                <!--<label class="checkbox-inline">-->
                    <!--<input type="checkbox" id="chbPullRequest1" value="option3"> PULL REQUEST-->
                <!--</label>-->
            <!--</td>-->
        <!--</tr>-->
        <!--<tr>-->
            <!--<td>Repo2</td>-->
            <!--<td>-->
                <!--<label class="checkbox-inline">-->
                    <!--<input type="checkbox" id="chbCommit2" value="option1"> COMMIT-->
                <!--</label>-->
                <!--<label class="checkbox-inline">-->
                    <!--<input type="checkbox" id="chbIssues2" value="option2"> ISSUES-->
                <!--</label>-->
                <!--<label class="checkbox-inline">-->
                    <!--<input type="checkbox" id="chbPullRequest2" value="option3"> PULL REQUEST-->
                <!--</label>-->
            <!--</td>-->
        <!--</tr>-->
        <!--<tr id="new_row">-->
            <!--<script>-->
                <!--function fun() {-->
                    <!--document.getElementById("new_row").innerHTML = "<td>Jasmina</td> <td><label class='checkbox-inline'> <input type='checkbox' id='chbCommit2' value='option1'> COMMIT </label> <label class='checkbox-inline'><input type='checkbox' id='chbIssues2' value='option2'> ISSUES </label> <label class='checkbox-inline'> <input type='checkbox' id='chbPullRequest2' value='option3'> PULL REQUEST </label></td>";-->
                <!--}-->
            <!--</script>-->
        <!--</tr>-->
        </tbody>
    </table>
</div>
<div class="container-fluid" id="div_buttons">
    <button type="button" class="btn btn-info refresh">Refresh</button>
    <button type="button" class="btn btn-success collect">Collect</button>
</div>
<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="js/bootstrap.min.js"></script>
<script src="js/jqote.js"></script>
</body>

<script language="javascript">
    $(document).ready(function () {

//        $('#dodaj').click(function(){
//            var $tr = $('#repositories tbody tr:first-child').clone();
//
//            $($tr).data('broj', Math.random());
//            $('#repositories tbody').append($tr);
//        });

        $('.refresh').click(function(){
           window.location.reload();
        });

        $('.collect').click(function(){
            console.log('klikan');
            $('td input:checked', $('#repositories tbody tr')).each(function(idx, elem){
                console.log($(elem).closest('tr').data('broj'));
            });
        });
        $.get('examplejson/fetchAll').done(function(data){
            var $prvi = $(data).get(0);
            console.log(data.length);
            console.log(data);
            $.each(data, function( index, repoInfo ) {
                var $temp = $( $('#template').jqote(repoInfo)).appendTo($('#repositories tbody'));
                $($temp).data('info', repoInfo);
            });
        });
    });
</script>

<script type="text/html" id="template">
    <![CDATA[
    <tr>
        <% $name = this.baseURL.split("/"); %>
        <td><%= $name[$name.length-1] %></td>
        <td>
            <% for ( index in this.dateTypes) {%>
            <label class="checkbox-inline">
                <input type="checkbox" id="chbCommit2" value="option1"><%= this.dateTypes[index] %>
            </label>
            <% }; %>
        </td>
    </tr>
    ]]>
</script>
</html>